  \documentclass[12pt, titlepage]{article}

  \usepackage{amsmath, mathtools}

  \usepackage[round]{natbib}
  \usepackage{amsfonts}
  \usepackage{amssymb}
  \usepackage{graphicx}
  \usepackage{colortbl}
  \usepackage{xr}
  \usepackage{hyperref}
  \usepackage{longtable}
  \usepackage{xfrac}
  \usepackage{tabularx}
  \usepackage{float}
  \usepackage{siunitx}
  \usepackage{booktabs}
  \usepackage{multirow}
  \usepackage[section]{placeins}
  \usepackage{caption}
  \usepackage{fullpage}

  \hypersetup{
  bookmarks=true,     % show bookmarks bar?
  colorlinks=true,       % false: boxed links; true: colored links
  linkcolor=red,          % color of internal links (change box color with linkbordercolor)
  citecolor=blue,      % color of links to bibliography
  filecolor=magenta,  % color of file links
  urlcolor=cyan          % color of external links
  }

  \usepackage{array}

  \externaldocument{../../SRS/SRS}

  \input{../../Comments}
  \input{../../Common}

  \begin{document}

  \title{Module Interface Specification for \progname{}}

  \author{\authname}

  \date{\today}

  \maketitle

  \pagenumbering{roman}

  \section{Revision History}

  \begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
  \toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
  \midrule
  Nov 13 & 1.0 & Version 1 completed\\
  \bottomrule
  \end{tabularx}

  ~\newpage

  \section{Symbols, Abbreviations and Acronyms}

  See SRS Documentation at \url{https://github.com/mansha71/CapstoneProject/tree/main/docs/SRS}

  \newpage

  \tableofcontents

  \newpage

  \pagenumbering{arabic}

  \section{Introduction}

  The following document details the Module Interface Specifications for Visionaries, a system designed to analyze and visualize student engagement during lectures using eye-tracking technology. Each module is described in terms of its purpose, syntax, semantics, and interactions with other modules.

  Complementary documents include the System Requirement Specifications
  and Module Guide.  The full documentation and implementation can be
  found at \url{https://github.com/mansha71/CapstoneProject}.

  \section{Notation}

  The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
  with the addition that template modules have been adapted from
  \cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
  \citet{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
  multiple assignment statement and conditional rules follow the form $(c_1
  \Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

  The following table summarizes the primitive data types used by \progname. 

  \begin{center}
  \renewcommand{\arraystretch}{1.2}
  \noindent 
  \begin{tabular}{l l p{7.5cm}} 
  \toprule 
  \textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
  \midrule
  character & char & a single symbol or digit\\
  integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
  natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
  real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
  \bottomrule
  \end{tabular} 
  \end{center}

  \noindent
  The specification of \progname \ uses some derived data types: sequences, strings, and
  tuples. Sequences are lists filled with elements of the same data type. Strings
  are sequences of characters. Tuples contain a list of values, potentially of
  different types. In addition, \progname \ uses functions, which
  are defined by the data types of their inputs and outputs. Local functions are
  described by giving their type signature followed by their specification.

  \subsection{Derived Types}

  The following derived types are used throughout the module specifications:

  \begin{center}
  \renewcommand{\arraystretch}{1.2}
  \noindent 
  \begin{tabular}{l l p{7.0cm}} 
  \toprule 
  \textbf{Type Name} & \textbf{Definition} & \textbf{Description}\\ 
  \midrule
  DeviceID & String & Unique identifier for a connected eye-tracking device\\
  SessionID & String & Unique identifier for an active streaming session\\
  PseudonymID & String & Pseudonymous identifier replacing a DeviceID\\
  DataBlob & ByteArray & Raw binary data payload\\
  StreamConfig & Tuple(host: String, port: $\mathbb{N}$, bufferSize: $\mathbb{N}$) & Configuration for initializing a stream\\
  StreamSession & Tuple(sessionID: SessionID, lastFrame: VideoFrame, timestamp: $\mathbb{R}$) & Active session state per device\\
  VideoFrame & ByteArray & Single frame of video data\\
  SystemMetrics & Tuple(cpuUsage: $\mathbb{R}$, memoryUsage: $\mathbb{R}$, activeStreams: $\mathbb{N}$) & Runtime performance metrics\\
  SystemEvent & Tuple(eventType: String, timestamp: $\mathbb{R}$, details: String) & Logged system event\\
  RetentionPolicy & Tuple(maxAgeDays: $\mathbb{N}$, maxSessions: $\mathbb{N}$) & Rules for session data retention\\
  StorageRef & String & File path reference to stored session data\\
  StreamData & Sequence(VideoFrame) & Sequence of video frames for streaming\\
  Role & String & Role label used for RBAC checks (e.g., instructor, researcher, admin)\\
  ResourceID & String & Identifier for a protected resource (session, report, export, endpoint)\\
  Status & String & Return status indicator (e.g., success, opened, closed, logged)\\
  PrivacyEvent & Tuple(eventType: String, deviceID: DeviceID, timestamp: $\mathbb{R}$) & Privacy-related audit event\\
  AccessEvent & Tuple(role: Role, resource: ResourceID, timestamp: $\mathbb{R}$) & Authorization/access audit event\\
  SystemReport & Tuple(health: String, summary: String, timestamp: $\mathbb{R}$) & Summary view of recent metrics/logs\\
  \bottomrule
  \end{tabular} 
  \end{center}

  \newpage

  \section{Module Decomposition}

  The following table is taken directly from the Module Guide document for this project.

\begin{table}[h!]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

Hardware-Hiding Module 
& Hardware-Hiding Module \\

\midrule
\multirow{4}{0.3\textwidth}{Behaviour-Hiding Modules} 
& Data Ingestion Module\\
& Real-Time Streaming Module\\
& Dashboard Visualization Module\\
& Reporting Module\\

\midrule
\multirow{7}{0.3\textwidth}{Software Decision Modules} 
& Data Preprocessing Module\\
& Privacy Filtering Module\\
& Access Control Module\\
& Secure Storage \& Retention Module\\
& Observability Module\\
& Engagement Analytics Module\\
& Correlation \& Visual Analysis Module\\

\bottomrule
\end{tabular}
\caption{Module Hierarchy for Visionaries System}
\label{TblMH}
\end{table}

\newpage

\section{MIS of Hardware-Hiding Module} \label{HardwareHidingModule}

\subsection{Module}

This module abstracts the physical sensing and I/O devices (eye-tracking glasses, cameras,
microphones, storage interfaces, and network interfaces) behind a uniform virtual device
interface. Downstream modules interact only with this interface and do not depend on vendor
SDK calls, device driver details, or OS-specific mechanisms.

\subsection{Uses}

None.

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{4.2cm} p{5.2cm} p{3.0cm} p{2.2cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
openDevice & deviceID: DeviceID & status: Status & ConnectionError \\
closeDevice & deviceID: DeviceID & status: Status & None \\
readGazeFrame & deviceID: DeviceID & rawGazeData: DataBlob & ConnectionError \\
readWorldFrame & deviceID: DeviceID & rawVideoData: VideoFrame & ConnectionError \\
readAudioChunk & deviceID: DeviceID & rawAudioData: DataBlob & ConnectionError \\
getDeviceMetadata & deviceID: DeviceID & metadata: DataBlob & None \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Hardware-Hiding Module}
\label{tab:hardwareHidingAP}
\end{table}

\subsection{Semantics}

\subsubsection{State Variables}

openDevices: Set(DeviceID) \\
Tracks currently opened/available devices.

\subsubsection{Environment Variables}

Vendor SDKs, OS device drivers, and hardware interfaces.

\subsubsection{Assumptions}

Devices are discoverable by the underlying OS/SDK and can be opened/closed by the process.

\subsubsection{Access Routine Semantics}

\noindent openDevice(deviceID: DeviceID):
\begin{itemize}
\item transition: openDevices := openDevices $\cup$ \{deviceID\}
\item output: status := opened
\item exception: Raises ConnectionError if the device cannot be opened.
\end{itemize}

\noindent closeDevice(deviceID: DeviceID):
\begin{itemize}
\item transition: openDevices := openDevices $\setminus$ \{deviceID\}
\item output: status := closed
\item exception: None
\end{itemize}

\noindent readGazeFrame(deviceID: DeviceID):
\begin{itemize}
\item transition: None
\item output: rawGazeData
\item exception: Raises ConnectionError if the device is unavailable.
\end{itemize}

\noindent readWorldFrame(deviceID: DeviceID):
\begin{itemize}
\item transition: None
\item output: rawVideoData
\item exception: Raises ConnectionError if the device is unavailable.
\end{itemize}

\noindent readAudioChunk(deviceID: DeviceID):
\begin{itemize}
\item transition: None
\item output: rawAudioData
\item exception: Raises ConnectionError if the device is unavailable.
\end{itemize}

\noindent getDeviceMetadata(deviceID: DeviceID):
\begin{itemize}
\item transition: None
\item output: metadata
\item exception: None
\end{itemize}

\subsubsection{Local Functions}

sdkRead: DeviceID $\rightarrow$ DataBlob \\
\noindent \textit{Semantics:} Reads a device-specific payload via vendor SDK/driver calls.


\section{MIS of Data Ingestion Module} \label{DataIngestionModule}

\subsection{Module}

This module entails collecting eye-tracking and video data from multiple eye-tracking devices, video data from the central camera and screen recording, as well as instructor audio recordings and pre-/post-lecture questionnaire responses. It is responsible solely for the reliable capture and initial storage of all incoming raw data streams, without performing any preprocessing or filtering operations.

\subsection{Uses}

Hardware-Hiding Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{3.4cm} p{4.4cm} p{4.2cm} p{2.3cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
collectGazeData & deviceID, streamConfig & rawGazeData & ConnectionError \\
collectVideoData & sourceID, streamConfig & rawVideoData & ConnectionError \\
collectAudioData & deviceID & rawAudioData & ConnectionError \\
collectQuestionnaire & formInput & questionnaireData & FormatError \\
storeRawData & dataBundle & status & IOError \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Data Ingestion Module}
\label{tab:dataIngestionAP}
\end{table}

\subsection{Semantics}

\subsubsection{State Variables}

storedData: list of captured raw data streams currently saved in local or cloud storage.

\subsubsection{Environment Variables}

Connections to Pupil Labs Neon devices, central camera, screen-recording source, audio input, and questionnaire input sources.

\subsubsection{Assumptions}

All recording devices are properly connected, network latency is within acceptable limits for real-time transfer, and the file system or storage backend is accessible.

\subsubsection{Access Routine Semantics}

\noindent collectGazeData():
\begin{itemize}
\item transition: Initiates collection of gaze and world-view video data from connected eye-tracking devices.
\item output: Returns raw gaze and eye-camera data.
\item exception: Raises ConnectionError if device is unavailable.
\end{itemize}

\noindent collectVideoData():
\begin{itemize}
\item transition: Records video data from the central camera and screen-capture feed.
\item output: Returns raw video frames.
\item exception: Raises ConnectionError if any video source is unavailable.
\end{itemize}

\noindent collectAudioData():
\begin{itemize}
\item transition: Captures instructor audio from connected microphone devices.
\item output: Returns raw audio stream data.
\item exception: Raises ConnectionError if the audio device is unavailable.
\end{itemize}

\noindent collectQuestionnaire():
\begin{itemize}
\item transition: Collects pre- or post-lecture questionnaire submissions.
\item output: Returns questionnaire data.
\item exception: Raises FormatError for incomplete or malformed responses.
\end{itemize}

\noindent storeRawData():
\begin{itemize}
\item transition: Saves all raw data streams to secure storage with metadata describing device, timestamp, and session.
\item output: Returns success status.
\item exception: Raises IOError if data cannot be written.
\end{itemize}

\subsubsection{Local Functions}

validateConnection: DeviceID $\rightarrow$ Boolean \\
verifySourceAvailability: String $\rightarrow$ Boolean

  \newpage

  \newpage

  \section{MIS of Real-Time Streaming Module} \label{RealTimeStreamingModule}

  \subsection{Module}

  This module manages real-time transmission of gaze and video frames from multiple capture devices to a single dashboard client. It supports concurrent device streams and ensures low-latency delivery for live visualization.

  \subsection{Uses}

  Data Ingestion Module, Data Preprocessing Module, Privacy Filtering Module,
  Access Control Module, Secure Storage \& Retention Module, Observability Module

  \subsection{Syntax}

  \subsubsection{Exported Constants}

  None.

  \subsubsection{Exported Access Programs}

  \begin{table}[h!]
  \centering
  \renewcommand{\arraystretch}{1.2}
  \begin{tabular}{p{3.5cm} p{4.8cm} p{3.8cm} p{2.2cm}}
  \toprule
  \textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
  \midrule
  initializeStream & config: StreamConfig & sessionID & ConnectionError \\
  transmitData & deviceID: DeviceID, frame: VideoFrame & status & StreamError \\
  terminateStream & sessionID: SessionID & status & None \\
  \bottomrule
  \end{tabular}
  \caption{Exported Access Programs for Real-Time Streaming Module}
  \label{tab:realTimeStreamingAP}
  \end{table}

  \subsection{Semantics}

  \subsubsection{State Variables}

  activeSessions: Map(DeviceID $\rightarrow$ StreamSession) \\
  Stores the active streaming session information for each connected device.

  \subsubsection{Environment Variables}

  Network socket interface for dashboard communication.

  \subsubsection{Assumptions}

  A stable network connection exists and the dashboard client is available to receive data. \\
  Only live streaming is supported; no persistent buffering, recording, or replay functionality is implemented by this module.

  \subsubsection{Access Routine Semantics}

  \noindent initializeStream(config: StreamConfig):
  \begin{itemize}
  \item transition: Initializes an empty session map and prepares network communication resources.
  \item output: sessionID
  \item exception: ConnectionError
  \end{itemize}

  \noindent transmitData(deviceID: DeviceID, frame: VideoFrame):
  \begin{itemize}
  \item transition: activeSessions[deviceID].lastFrame := frame
  \item output: status := success
  \item exception: StreamError
  \end{itemize}

  \noindent terminateStream(sessionID: SessionID):
  \begin{itemize}
  \item transition: activeSessions := $\emptyset$
  \item output: status := terminated
  \item exception: None
  \end{itemize}

  \subsubsection{Local Functions}

  validateFrame: VideoFrame $\rightarrow$ Boolean \\
  openSocket: StreamConfig $\rightarrow$ NetworkHandle

  \newpage

 \section{MIS of Data Preprocessing Module} \label{DataPreprocessingModule}

\subsection{Module}

This module prepares the captured data for analysis by filtering noise, normalizing coordinates, and structuring the gaze and video data into usable formats. The recording inputs from the eye-tracking devices, central camera, and screen-recording coordinates are synchronized for homography, and instructor coordinates are generated throughout the recording. The screen-recording input is categorized based on visual item classes (e.g., text, diagram, image regions), and the audio stream is denoised, segmented, and temporally aligned with the synchronized video data. Questionnaire responses are cleaned by removing empty, duplicate, or invalid entries. This ensures all data sources are aligned, validated, and ready for analysis in downstream modules.

\subsection{Uses}

Data Ingestion Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{4.0cm} p{4.2cm} p{4.2cm} p{2.3cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
filterNoise & rawData & cleanData & DataError \\
synchronizeStreams & cleanDataBundle & syncedData & SyncError \\
computeHomography & syncedVideoData & alignedData & MathError \\
categorizeVisualItems & screenRecording & categorizedSegments & FormatError \\
cleanAudioStream & rawAudioData & processedAudio & AudioError \\
cleanQuestionnaireResponses & rawQuestionnaireData & validatedQuestionnaire & DataError \\
formatForAnalysis & alignedData & structuredData & FormatError \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Data Preprocessing Module}
\label{tab:dataPreprocessingAP}
\end{table}

\subsection{Semantics}

\subsubsection{State Variables}

None. Operates statelessly on provided input data.

\subsubsection{Environment Variables}

None.

\subsubsection{Assumptions}

Input data follows the expected format, timestamps are available for all streams, and synchronization metadata is provided from the ingestion stage.

\subsubsection{Access Routine Semantics}

\noindent filterNoise(rawData):
\begin{itemize}
\item transition: Applies filters (e.g., smoothing, low-pass, temporal averaging) to remove noise from gaze, video, and audio streams.
\item output: cleanData
\item exception: Raises DataError for corrupted or incomplete data.
\end{itemize}

\noindent synchronizeStreams(cleanDataBundle):
\begin{itemize}
\item transition: Aligns gaze, video, screen recording, and audio streams using timestamps or synchronization cues.
\item output: syncedData
\item exception: Raises SyncError if synchronization fails.
\end{itemize}

\noindent computeHomography(syncedVideoData):
\begin{itemize}
\item transition: Computes spatial mappings between gaze coordinates and screen coordinates.
\item output: alignedData
\item exception: Raises MathError if homography computation fails.
\end{itemize}

\noindent categorizeVisualItems(screenRecording):
\begin{itemize}
\item transition: Segments screen recordings into visual item classes such as text, diagrams, and images.
\item output: categorizedSegments
\item exception: Raises FormatError if segmentation fails.
\end{itemize}

\noindent cleanAudioStream(rawAudioData):
\begin{itemize}
\item transition: Removes background noise and aligns audio with synchronized video streams.
\item output: processedAudio
\item exception: Raises AudioError if audio processing fails.
\end{itemize}

\noindent cleanQuestionnaireResponses(rawQuestionnaireData):
\begin{itemize}
\item transition: Removes empty, duplicate, or malformed questionnaire responses.
\item output: validatedQuestionnaire
\item exception: Raises DataError if validation fails.
\end{itemize}

\noindent formatForAnalysis(alignedData):
\begin{itemize}
\item transition: Structures synchronized and aligned data into a standardized schema.
\item output: structuredData
\item exception: Raises FormatError for invalid schema generation.
\end{itemize}

\subsubsection{Local Functions}

interpolateMissingFrames: StreamData $\rightarrow$ StreamData \\
alignTimestamps: Sequence(DataBlob) $\rightarrow$ Sequence(DataBlob) \\
extractInstructorCoordinates: VideoFrame $\rightarrow$ CoordinateStream \\
computeVisualClasses: VideoFrame $\rightarrow$ VisualLabel

\newpage
\section{MIS of Privacy Filtering Module} \label{PrivacyFilteringModule}

\subsection{Module}

This module applies privacy filtering to sensitive identifiers before data is stored,
streamed, or exported. The implemented anonymization is pseudonymous: device identifiers
are replaced using a deterministic pseudonymization rule. Consent collection is handled
externally; this module may verify consent status if provided by the calling context.

\subsection{Uses}

Data Ingestion Module, Data Preprocessing Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{4.0cm} p{5.6cm} p{3.0cm} p{2.2cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
generatePseudonym & deviceID: DeviceID & pseudonymID: PseudonymID & PrivacyError \\
anonymizeParticipant & deviceID: DeviceID & anonymizedID: PseudonymID & PrivacyError \\
verifyConsent & deviceID: DeviceID & isConsented: Boolean & None \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Privacy Filtering Module}
\label{tab:privacyFilteringAP}
\end{table}

\subsection{Semantics}

\subsubsection{State Variables}

pseudonymMap: Map(DeviceID $\rightarrow$ PseudonymID) \\
Stores the pseudonymous identifier associated with each device identifier for the current execution context.

consentMap: Map(DeviceID $\rightarrow$ Boolean) \\
Tracks whether a participant (identified by deviceID) has provided consent.

\subsubsection{Environment Variables}

None.

\subsubsection{Assumptions}

Participant consent is handled externally, but consent status may be provided and tracked
within this module for runtime verification. \\
Pseudonym mappings are accessible only within controlled internal contexts and are not
exposed to external systems or users. \\
This module does not implement irreversible anonymization beyond pseudonymization.

\subsubsection{Access Routine Semantics}

\noindent generatePseudonym(deviceID: DeviceID):
\begin{itemize}
\item transition:
\begin{itemize}
\item If deviceID $\notin$ dom(pseudonymMap), then pseudonymMap[deviceID] := newPseudonym.
\end{itemize}
\item output: pseudonymID := pseudonymMap[deviceID]
\item exception: Raises PrivacyError if a pseudonym cannot be generated for the provided deviceID.
\end{itemize}

\noindent anonymizeParticipant(deviceID: DeviceID):
\begin{itemize}
\item transition:
\begin{itemize}
\item Ensures a pseudonym exists for deviceID by invoking generatePseudonym(deviceID) when needed.
\end{itemize}
\item output: anonymizedID := pseudonymMap[deviceID]
\item exception: Raises PrivacyError if the deviceID cannot be mapped to a pseudonym.
\end{itemize}

\noindent verifyConsent(deviceID: DeviceID):
\begin{itemize}
\item transition: None
\item output: isConsented := consentMap[deviceID] (defaults to false if not present)
\item exception: None
\end{itemize}

\subsubsection{Local Functions}

generateSecureID: DeviceID $\rightarrow$ PseudonymID \\
\noindent \textit{Semantics:} Produces a pseudonymous identifier based on the provided DeviceID using a deterministic rule.

\newpage
\section{MIS of Access Control Module} \label{AccessControlModule}

\subsection{Module}

This module enforces authorization decisions for system actions such as viewing dashboards,
subscribing to streams, accessing stored sessions, and exporting reports. It encapsulates
role-based access control (RBAC) policy and exposes authorization checks to other modules.
This module does not implement privacy anonymization or consent collection. Security-relevant
authorization events are emitted to the Observability Module, which owns audit logging policy
and storage.

\subsection{Uses}

Observability Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{3.8cm} p{6.0cm} p{2.8cm} p{2.2cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
validateAccess & userRole: Role, resource: ResourceID & permissionStatus: Boolean & AuthError \\
logAccess & event: AccessEvent & status: Status & None \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Access Control Module}
\label{tab:accessControlAP}
\end{table}

\subsection{Semantics}

\subsubsection{State Variables}

None. Authorization decisions are computed from provided role and resource inputs.
Audit records are emitted to the Observability Module.

\subsubsection{Environment Variables}

None.

\subsubsection{Assumptions}

Roles are provided by the calling context and are already authenticated externally. \\
Authorization policy is defined as role-to-resource permissions and may evolve
independently of other system modules.

\subsubsection{Access Routine Semantics}

\noindent validateAccess(userRole: Role, resource: ResourceID):
\begin{itemize}
\item transition:
\begin{itemize}
  \item permissionStatus := (userRole is permitted to access resource)
  \item Emit a SystemEvent describing the authorization decision to the Observability Module
\end{itemize}
\item output: permissionStatus
\item exception: Raises AuthError if the userRole or resource identifier is invalid.
\end{itemize}

\noindent logAccess(event: AccessEvent):
\begin{itemize}
\item transition: Convert the AccessEvent to a SystemEvent and emit it to the Observability Module
\item output: status := logged
\item exception: None
\end{itemize}

\subsubsection{Local Functions}

createAuthEvent: (Role, ResourceID, Boolean) $\rightarrow$ SystemEvent \\
\noindent \textit{Semantics:} Creates a structured authorization audit event describing an allow or deny decision.

convertAccessEvent: AccessEvent $\rightarrow$ SystemEvent \\
\noindent \textit{Semantics:} Transforms an AccessEvent into a SystemEvent suitable for logging by Observability.

\newpage

\section{MIS of Secure Storage \& Retention Module} \label{SecureStorageRetentionModule}

\subsection{Module}

This module is responsible for storing and retrieving session artifacts and enforcing retention and deletion policies. Data is stored locally as files and may be accessed later. When retain=true, session data is persisted to disk; when retain=false, data is used for live processing only and no disk persistence occurs.

\subsection{Uses}

Data Ingestion Module, Data Preprocessing Module, Privacy Filtering Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{4.2cm} p{5.4cm} p{2.8cm} p{2.2cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
storeSessionData & sessionID: SessionID, \newline data: DataBlob, \newline retain: Boolean & status: Status & IOError \\
retrieveSessionData & sessionID: SessionID & data: DataBlob & IOError \\
deleteSessionData & sessionID: SessionID & status: Status & IOError \\
enforceRetentionPolicy & policy: RetentionPolicy & status: Status & None \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Secure Storage \& Retention Module}
\label{tab:secureStorageRetentionAP}
\end{table}

\subsection{Semantics}

\subsubsection{State Variables}

storedSessions: Map(SessionID $\rightarrow$ StorageRef) \\
Maps each stored session to a storage reference (for example, a file path).

\subsubsection{Environment Variables}

Local file system access for reading and writing session artifacts.

\subsubsection{Assumptions}

Data retention is controlled by a boolean retain flag supplied by the caller. \\
Storage is local-only (no cloud backend assumed). \\
If retain = false, data may be used live but is not persisted by this module.

\subsubsection{Access Routine Semantics}

\noindent storeSessionData(sessionID: SessionID, data: DataBlob, retain: Boolean):
\begin{itemize}
\item transition:
\begin{itemize}
\item If retain = true, write data to local storage and set storedSessions[sessionID] := storageRef.
\item If retain = false, data is used for live processing only; no disk persistence occurs and storedSessions is unchanged.
\end{itemize}
\item output: status := success if retain = false or if the write succeeds; otherwise raises an exception
\item exception: Raises IOError if retain = true and data cannot be written.
\end{itemize}

\noindent retrieveSessionData(sessionID: SessionID):
\begin{itemize}
\item transition: None
\item output: data := read data from storedSessions[sessionID]
\item exception: Raises IOError if sessionID is not found in storedSessions or the storage reference cannot be read.
\end{itemize}

\noindent deleteSessionData(sessionID: SessionID):
\begin{itemize}
\item transition:
\begin{itemize}
\item Remove persisted artifacts for sessionID from storage (if present).
\item Remove sessionID from storedSessions if it exists.
\end{itemize}
\item output: status := deleted
\item exception: Raises IOError if deletion fails due to file system errors.
\end{itemize}

\noindent enforceRetentionPolicy(policy: RetentionPolicy):
\begin{itemize}
\item transition: Deletes stored sessions that violate the provided retention policy.
\item output: status := applied
\item exception: None
\end{itemize}

\subsubsection{Local Functions}

resolveStorageRef: SessionID $\rightarrow$ StorageRef \\
\noindent \textit{Semantics:} Determines the storage reference used for a given session.

\newpage
\section{MIS of Observability Module} \label{ObservabilityModule}

\subsection{Module}

This module handles system metrics collection, stream health monitoring, and error/event logging for runtime observability. It is responsible for reporting basic health information about the system execution and recording significant runtime events.

\subsection{Uses}

None.

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{4.0cm} p{5.6cm} p{2.8cm} p{2.2cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
monitorInfrastructure & metrics: SystemMetrics & systemReport: SystemReport & None \\
logSystemEvent & event: SystemEvent & status: Status & None \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Observability Module}
\label{tab:observabilityAP}
\end{table}

\subsection{Semantics}

\subsubsection{State Variables}

systemEventLog: Sequence(SystemEvent) \\
systemMetricsLog: Sequence(SystemMetrics)

\subsubsection{Environment Variables}

System monitoring interfaces available to the runtime environment.

\subsubsection{Assumptions}

Metrics are best-effort: missing metrics do not crash the system. \\
This module does not enforce alerting or external monitoring integrations unless added later.

\subsubsection{Access Routine Semantics}

\noindent monitorInfrastructure(metrics: SystemMetrics):
\begin{itemize}
\item transition: systemMetricsLog := systemMetricsLog $\cup$ \{metrics\}
\item output: systemReport := summary of current metrics (for example, recent values and basic health status)
\item exception: None
\end{itemize}

\noindent logSystemEvent(event: SystemEvent):
\begin{itemize}
\item transition: systemEventLog := systemEventLog $\cup$ \{event\}
\item output: status := logged
\item exception: None
\end{itemize}

\subsubsection{Local Functions}

summarizeMetrics: Sequence(SystemMetrics) $\rightarrow$ SystemReport \\
\noindent \textit{Semantics:} Produces a SystemReport summarizing recent system metrics.

  \newpage

  \section{MIS of Engagement Analytics Module} \label{EngagementAnalyticsModule}

  \subsection{Module}

  This module analyzes student engagement by combining attention metrics with pre- and post-lecture questionnaire results. Questionnaire data is collected through the Data Ingestion Module, anonymized by the Privacy Filtering Module and preprocessed before reaching this module. Each question is associated with the content of a specific slide, helping compute slide-level learning scores. With pre- and post-lecture questionnaires, changes in student understanding can be identified and correlated with gaze-data. These analytics quantify the effectiveness of each slide, object type, instructor-directed attention, and instructor audio trends.

  \subsection{Uses}

  Data Preprocessing Module, Privacy Filtering Module

  \subsection{Syntax}

  \subsubsection{Exported Constants}

  None.

  \subsubsection{Exported Access Programs}

  \begin{table}[h!]
  \centering
  \renewcommand{\arraystretch}{1.2}
  \begin{tabular}{p{3.2cm} p{4.2cm} p{4.2cm} p{2.5cm}}
  \toprule
  \textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
  \midrule
  computeLearningScores & anonymizedQuestionnaireData, slideMap & learningScores & DataError \\
  \bottomrule
  \end{tabular}
  \caption{Exported Access Programs for Engagement Analytics Module}
  \label{tab:engagementAnalyticsAP}
  \end{table}

  \subsection{Semantics}

  \subsubsection{State Variables}

  None.

  \subsubsection{Environment Variables}

  None.

  \subsubsection{Assumptions}

  Questionnaire data has already been collected, anonymized, and validated.  
  Each questionnaire item includes a slide reference.

  \subsubsection{Access Routine Semantics}

\noindent computeLearningScores(anonymizedQuestionnaireData, slideMap):
\begin{itemize}
\item transition: Computes pre/post learning gains per slide using questionnaire data linked to slide identifiers. Aggregates multiple questions associated with the same slide.
\item output: learningScores
\item exception: Raises DataError for missing, malformed, or improperly mapped questionnaire items.
\end{itemize}

  \subsubsection{Local Functions}

  computeLearningDelta(), aggregateSlideScores()

  \newpage

  \section{MIS of Correlation and Visual Analysis Module} \label{CorrelationVisualAnalysisModule}

  \subsection{Module}

  This module maps gaze data into pixel-based scene coordinates, detects slide transitions from live video frames, classifies gaze targets, and aligns learning analytics with visual content.

  \subsection{Uses}

  Data Preprocessing Module, Engagement Analytics Module

  \subsection{Syntax}

  \subsubsection{Exported Constants}

  None.

  \subsubsection{Exported Access Programs}

  \begin{table}[h!]
  \centering
  \renewcommand{\arraystretch}{1.2}
  \begin{tabular}{p{3.6cm} p{5.0cm} p{3.6cm} p{2.0cm}}
  \toprule
  \textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
  \midrule
  mapCoordinatesToScene & worldViewData, sceneModel & pixelMappedData & MappingError \\
  detectSlideTransitions & liveVideoFrames & slideTimeline & VideoError \\
  classifyGazeTarget & pixelMappedData, slideObjects, instructorRegions & labeledGazeData & ClassificationError \\
  alignLearningScores & learningScores, slideTimeline & slideLearningMap & None \\
  \bottomrule
  \end{tabular}
  \caption{Exported Access Programs for Correlation and Visual Analysis Module}
  \label{tab:correlationVisualAnalysisAP}
  \end{table}

  \subsection{Semantics}

  \subsubsection{State Variables}

  None.

  \subsubsection{Environment Variables}

  None.

  \subsubsection{Assumptions}

  Live video frames are synchronized with gaze streams.  
  Slide identifiers referenced in learning scores are valid.

  \subsubsection{Access Routine Semantics}

  \noindent mapCoordinatesToScene(worldViewData, sceneModel):
  \begin{itemize}
  \item transition: Projects gaze vectors into pixel coordinate space.
  \item output: pixelMappedData
  \item exception: MappingError
  \end{itemize}

  \noindent detectSlideTransitions(liveVideoFrames):
  \begin{itemize}
  \item transition: Identifies slide boundaries from incoming video frames.
  \item output: slideTimeline
  \item exception: VideoError
  \end{itemize}

  \noindent classifyGazeTarget(pixelMappedData, slideObjects, instructorRegions):
  \begin{itemize}
  \item transition: Assigns semantic labels to gaze points.
  \item output: labeledGazeData
  \item exception: ClassificationError
  \end{itemize}

  \noindent alignLearningScores(learningScores, slideTimeline):
  \begin{itemize}
  \item transition: Associates learning metrics with slide intervals.
  \item output: slideLearningMap
  \item exception: None
  \end{itemize}

  \subsubsection{Local Functions}

  projectPixel: GazeVector $\rightarrow$ PixelCoordinate \\
  matchSlideRegion: PixelCoordinate $\rightarrow$ SlideRegion

  \newpage

  \section{MIS of Dashboard Visualization Module} \label{DashboardVisualizationModule}

  \subsection{Module}

  This module renders real-time visualization of incoming gaze and video streams for live monitoring. It displays device video feeds and derived analytics overlays when available.

  \subsection{Uses}

  Real-Time Streaming Module, Correlation \& Visual Analysis Module, Engagement Analytics Module,
  Access Control Module, Observability Module

  \subsection{Syntax}

  \subsubsection{Exported Constants}

  None.

  \subsubsection{Exported Access Programs}

  \begin{table}[h!]
  \centering
  \renewcommand{\arraystretch}{1.2}
  \begin{tabular}{p{3.6cm} p{4.8cm} p{3.8cm} p{2.2cm}}
  \toprule
  \textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
  \midrule
  renderPlayer & liveFrameStream: StreamData & uiHandle & RenderError \\
  updateDeviceView & deviceID: DeviceID, frame: VideoFrame & status & None \\
  displayObjectStats & labeledGazeData & statsPanel & None \\
  showLearningScores & slideLearningMap & learningPanel & None \\
  \bottomrule
  \end{tabular}
  \caption{Exported Access Programs for Dashboard Visualization Module}
  \label{tab:dashboardVisualizationAP}
  \end{table}

  \subsection{Semantics}

  \subsubsection{State Variables}

  None.

  \subsubsection{Environment Variables}

  Web rendering framework and browser graphics context.

  \subsubsection{Assumptions}

  Incoming data streams are synchronized and valid.

  \subsubsection{Access Routine Semantics}

  \noindent renderPlayer(liveFrameStream: StreamData):
  \begin{itemize}
  \item transition: Initializes live rendering pipeline.
  \item output: uiHandle
  \item exception: RenderError
  \end{itemize}

  \noindent updateDeviceView(deviceID: DeviceID, frame: VideoFrame):
  \begin{itemize}
  \item transition: Updates displayed frame for the specified device.
  \item output: status := updated
  \item exception: None
  \end{itemize}

  \noindent displayObjectStats(labeledGazeData):
  \begin{itemize}
  \item transition: Updates object-level attention statistics display.
  \item output: statsPanel
  \item exception: None
  \end{itemize}

  \noindent showLearningScores(slideLearningMap):
  \begin{itemize}
  \item transition: Displays slide-level learning metrics.
  \item output: learningPanel
  \item exception: None
  \end{itemize}

  \subsubsection{Local Functions}

  renderFrame: VideoFrame $\rightarrow$ DOMElement \\
  updateOverlay: LabeledData $\rightarrow$ OverlayLayer

  \newpage

  \section{MIS of Reporting Module} \label{ReportingModule}

  \subsection{Module}

  This module generates automated or customized reports integrating object-level attention, instructor-region attention, slide timelines, and learning outcome scores. Reports summarize both attention patterns and learning gains, enabling instructors to evaluate instructional effectiveness.

  \subsection{Uses}

  Dashboard Visualization Module, Engagement Analytics Module, Correlation \& Visual Analysis Module,
  Secure Storage \& Retention Module, Access Control Module

  \subsection{Syntax}

  \subsubsection{Exported Constants}

  None.

  \subsubsection{Exported Access Programs}

  \begin{table}[h!]
  \centering
  \renewcommand{\arraystretch}{1.2}
  \begin{tabular}{p{3.2cm} p{4.2cm} p{4.2cm} p{2.5cm}}
  \toprule
  \textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
  \midrule
  generateAutoReport & analyticsData, slideLearningMap & reportDocument & ReportError \\
  customizeReport & selectionCriteria, analyticsData, slideLearningMap & customReport & None \\
  exportReport & reportDocument, format & fileOutput & FileError \\
  \bottomrule
  \end{tabular}
  \caption{Exported Access Programs for Reporting Module}
  \label{tab:reportingAP}
  \end{table}

  \subsection{Semantics}

  \subsubsection{State Variables}

  None.

  \subsubsection{Environment Variables}

  Access to file storage or cloud-based export locations.

  \subsubsection{Assumptions}

  All analytics and learning score data inputs are precomputed and validated.

  \subsubsection{Access Routine Semantics}

\noindent generateAutoReport(analyticsData, slideLearningMap):
\begin{itemize}
\item transition: Produces a complete report containing aggregated attention metrics, slide timelines, and learning outcome scores.
\item output: reportDocument
\item exception: Raises ReportError if report generation fails.
\end{itemize}

\noindent customizeReport(selectionCriteria, analyticsData, slideLearningMap):
\begin{itemize}
\item transition: Generates a report restricted to selected slides, objects, or time intervals.
\item output: customReport
\item exception: None.
\end{itemize}

\noindent exportReport(reportDocument, format):
\begin{itemize}
\item transition: Converts the report into the specified output format and writes it to storage.
\item output: fileOutput
\item exception: Raises FileError if export fails.
\end{itemize}

\subsubsection{Local Functions}

plotLearningVsAttention: AnalyticsData $\rightarrow$ Figure \\
compileSlideSections: SlideLearningMap $\rightarrow$ ReportSection \\
exportFile: ReportDocument $\times$ Format $\rightarrow$ File

  \newpage

  \section*{Appendix --- Reflection}

  The information in this section will be used to evaluate the team members on the
  graduate attribute of Problem Analysis and Design.

  \input{../../Reflection.tex}

  \begin{enumerate}
    \item What went well while writing this deliverable? 

  \textbf{Stanley:} Once we settled on the module list, filling in the MIS felt pretty natural and I could lean on the SRS and MG a lot.

  \textbf{Manan:} The team was able to work well together and we were able to split the work effectively.

  \textbf{Angela:} We were able to meet with the supervisors this week and get a good grasp on what they're looking for in terms of the designing of our modules, dashboard, and eventually, POC. 

  \textbf{Ann:} During this deliverable we got to have another meeting with our supervisors, as well as meet the PhD students who developed SocialEyes. We got to learn more about the SocialEyes framework and see how the different modules are used.

  \textbf{Ibrahim:} Breaking the project into modules gave us a good understanding of what our next steps should be, and helped us plan ahead.

    \item What pain points did you experience during this deliverable, and how
      did you resolve them?

  \textbf{Stanley:} I struggled a bit with how detailed each interface should be, but looking at past MIS examples helped me find the right level.

  \textbf{Manan:} The main pain point we experienced was coordinating with our supervisors and coming up with a list of modules we though worked well with out system.

  \textbf{Angela:} While we were able to derive a sufficient list of modules for our system, it did take a lot of back-and-forth, as well as brainstorming to come up with the modules, the purpose for them, etc.

  \textbf{Ann:} Given the amount of functional and non-functional requirements listed in the SRS, I had to filter the amount that would be mapped to our modules. It was difficult for me to come up with the top and most appropriate requirements to choose in the traceability matrix. 

  \textbf{Ibrahim:} Determining how to break the project into modules was difficult at first, as we were unsure of the exact expectations of the supervisors for each stream of the project we were planning to work on.

    \item Which of your design decisions stemmed from speaking to your client(s)
    or a proxy (e.g. your peers, stakeholders, potential users)? For those that
    were not, why, and where did they come from?

  \textbf{Stanley:} Most of my decisions came from our meetings with the supervisors, especially their focus on making the tool genuinely useful for instructors.

  \textbf{Manan:} Decisions regarding the modules were made after speaking with our TA and supervisor to ensure that we were on the right track. We were suggested to add more modules to better break down the system and also focus on the processing aspect of the system.

  \textbf{Angela:} We were able to speak with both supervisors, as well as another pHD student who has experience with attention, to infer our design decisions. It really helped as well that the supervisors are not stranger's to teaching, so they're sort of the primary audience we'd be creating our modules for.

  \textbf{Ann:} Our design decisions for the modules were inspired from our meetings with our supervisors as well as looking at the current implementation of modules and the design of the already existing SocialEyes framework.

  \textbf{Ibrahim:} The decision to include modules for the Real-Time system and the Engagement section were made following a meeting with the supervisors.

    \item While creating the design doc, what parts of your other documents (e.g.
    requirements, hazard analysis, etc), it any, needed to be changed, and why?

  \textbf{Stanley:} Nothing major needed changing, but the MIS did show a few spots in the SRS where we could clarify real-time versus post-session features later.

  \textbf{Manan:} Nothing significantly changed for over previous documents as we had a solid foundation from our SRS and other documents.

  \textbf{Angela:} There isn't really anything that needs to be changed stemming just from the design doc. However, that will likely change based on feedback from supervisors, TA, and peer reviews.

  \textbf{Ann:} Nothing as of yet needed to be changed.

  \textbf{Ibrahim:} There were no significant changes required.

    \item What are the limitations of your solution?  Put another way, given
    unlimited resources, what could you do to make the project better? (LO\_ProbSolutions)

  \textbf{Stanley:} We’re limited by hardware access and data, so with more resources I’d want more devices, more classrooms, and a more polished, customizable dashboard.

  \textbf{Manan:} We are limited by the availability of eye-tracking devices and the accuracy of those devices. Being able to have these devices on hand at all times would make it easier to plan a system that works well with the hardware.

  \textbf{Angela:} We don't have free reign access over using the eye-tracking devices, so we'll have to plan with the supervisors accordingly to use them.

  \textbf{Ann:} There are multiple stretch goals and stretch functional requirements as listed in the SRS that we would love to tackle if we were given more time (privacy module, scalability, etc.)

  \textbf{Ibrahim:} The number of eye-tracking devices available, as well the logistical challenges of setting up the lectures limits the amount of data we can test on.

    \item Give a brief overview of other design solutions you considered.  What
    are the benefits and tradeoffs of those other designs compared with the chosen
    design?  From all the potential options, why did you select the documented design?
    (LO\_Explores)

  \textbf{Stanley:} We briefly considered a more monolithic design, but the current modular breakdown felt cleaner and easier to extend without rewriting everything.

  \textbf{Manan:} We considered breaking down the modules further but we felt that the current breakdown was sufficient to cover all aspects of the system without overcomplicating it. The tradeoff with having too many modules is that it can make the system harder to manage and understand.

  \textbf{Angela:} We briefly considered both a more monolithic design and a more fine-grained module breakdown, but chose the documented design because it provides clearer information hiding and better aligns with the SRS without adding unnecessary complexity.

  \textbf{Ann:} We considered further breaking down our current module design smaller, but were worried about adding more complexity to the project. We wanted to carefully chooose our modules for best mapping to our requirements as defined in the SRS.

  \textbf{Ibrahim:} We considered separating some of the modules into versions for post-session and real-time analysis, but ultimately decided that the underlying frameworks would similar and scaleable enough to not have to work on them completely separately.

  \end{enumerate}

  \subsection*{Peer Implementation Reflection}
  \begin{itemize}
  \item (After you have implemented another team's module, which means this
  isn't filled in until after the original deadline). What did you learn by
  implementing another team's module? 

    \textbf{Zongcheng:} I learned how to read and interpret the SRS, MG, 
    and MIS documents to understand the requirements and design of the module. 
    I think this experience give me a better understanding of how to write these documents
    for my own modules in the future. The documents of group 21 is easy to follow and well-
    structured, which made the implementation process smoother. I think we can adopt 
    some of their documentation styles in our own documents for rev 0 and final submission.

  \item Were all the details you needed in the
  documentation, or did you need to make assumptions, or ask the other team
  questions?  

  \textbf{Zongcheng:} Thanks to group 21's instruction issue on GitHub, I was able to find
  specific sections of their documents that I needed to refer to during the implementation.
  However, I did have some assumptions provided by them and assumed by myself. I simply included
  all my assumptions in a seperate README.md file. For example, I didn't find how I was
  expected to handle the input and output data structures, so I created some simple classes
  to represent them. Our team leader Changhao reached out to group 21 for some clarifications
  and asked them to give us the access to their GitHub repository.


  \item If your team also had another team implement one of your modules,
  what was this experience like?  

  \textbf{Zongcheng:} No, we didn't have another team implement our module. Because we have 
  NDA with our client, we can't share our code with other teams.

  \item Are there things in your documentation you
  could have changed to make the process go more smoothly for when an
  ``outsider'' completes some of the implementation?
  \textbf{Zongcheng:} I would change our MG and MIS documents to a simpler format. Because 
  I found it isn't very readable compared to group 21's documents. I would also include
  more diagrams to illustrate the design of our modules.

\end{itemize}
  \end{document}
