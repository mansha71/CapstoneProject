\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
Nov 13 & 1.0 & Version 1 completed\\
\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at \url{https://github.com/mansha71/CapstoneProject/tree/main/docs/SRS}

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for Visionaries, a system designed to analyze and visualize student engagement during lectures using eye-tracking technology. Each module is described in terms of its purpose, syntax, semantics, and interactions with other modules.

Complementary documents include the System Requirement Specifications
and Module Guide.  The full documentation and implementation can be
found at \url{https://github.com/mansha71/CapstoneProject}.

\section{Notation}

The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
\citet{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by \progname. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{l l p{7.5cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
\bottomrule
\end{tabular} 
\end{center}

\noindent
The specification of \progname \ uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\section{Module Decomposition}

The following table is taken directly from the Module Guide document for this project.

\begin{table}[h!]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

{Hardware-Hiding} & Pupil Labs Neon Glasses, Central Camera, Instructor Laptop/Desktop \\
\midrule

\multirow{8}{0.3\textwidth}{Behaviour-Hiding} 
& Data Ingestion Module\\
& Real-Time Streaming Module\\
& Data Preprocessing Module\\
& Privacy \& Infrastructure Module\\
& Engagement Analytics Module\\
& Correlation \& Visual Analysis Module\\
& Dashboard Visualization Module\\
& Reporting Module\\
\midrule

\multirow{3}{0.3\textwidth}{Software Decision} 
& Data Storage and API Layer\\
& Authentication and Session Management\\
& Visualization Frameworks and Libraries\\
\bottomrule

\end{tabular}
\caption{Module Hierarchy for Visionaries System}
\label{TblMH}
\end{table}

\newpage
~\newpage

\section{MIS of Data Ingestion Module} \label{DataIngestionModule}

\subsection{Module}

This module is responsible for collecting eye-tracking and video data from multiple eye-tracking devices and also the central camera. It makes sure that the raw data streams are captured, synchronized, and stored in a structured format. Making it suitable for further processing. It also collects instructor audio recordings, slide content from the lecture, and pre-/post-lecture questionnaire responses.

\subsection{Uses}

Real-Time Streaming Module, Data Preprocessing Module, Privacy \& Infrastructure Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{3.2cm} p{4.2cm} p{4.2cm} p{2.5cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
collectData & deviceID, streamConfig & rawData & ConnectionError \\
collectAudio & deviceID & audioData & ConnectionError \\
collectSlides & slideSource & slideData & IOError \\
collectQuestionnaire & formInput & questionnaireData & FormatError \\
syncTimestamps & dataStreams & syncedData & SyncError \\
storeRawData & syncedData & status & IOError \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Data Ingestion Module}
\label{tab:dataIngestionAP}
\end{table}


\subsection{Semantics}

\subsubsection{State Variables}

storedData: list of captured data streams currently saved in local or cloud storage.

\subsubsection{Environment Variables}

Connection to Pupil Labs Neon devices, the central camera feed, audio recording devices, slide file sources, and questionnaire input sources.

\subsubsection{Assumptions}

The eye-tracking devices are properly connected and the network latency is within acceptable limits for real-time data transfer.

\subsubsection{Access Routine Semantics}

\noindent collectData():
\begin{itemize}
\item transition: Starts capturing data streams from connected devices.
\item output: Returns the raw data collected.
\item exception: Raises ConnectionError if device is unavailable.
\end{itemize}

\noindent collectAudio():
\begin{itemize}
\item transition: Captures raw instructor audio from the recording device.
\item output: Returns raw audio data.
\item exception: Raises ConnectionError if the audio device is unavailable.
\end{itemize}

\noindent collectSlides():
\begin{itemize}
\item transition: Retrieves slide files or slide metadata from the specified source.
\item output: Returns slide data.
\item exception: Raises IOError if slide files cannot be accessed.
\end{itemize}

\noindent collectQuestionnaire():
\begin{itemize}
\item transition: Collects pre- or post-lecture questionnaire responses.
\item output: Returns questionnaire data.
\item exception: Raises FormatError for incomplete or malformed questionnaire submissions.
\end{itemize}

\noindent syncTimestamps():
\begin{itemize}
\item transition: Aligns timestamps between multiple devices using NTP or local clock sync.
\item output: Returns synchronized data streams.
\item exception: Raises SyncError if timestamp alignment fails.
\end{itemize}

\noindent storeRawData():
\begin{itemize}
\item transition: Saves synchronized gaze, video, audio, slide, and questionnaire data to secure storage.
\item output: Returns success status.
\item exception: Raises IOError if data cannot be written.
\end{itemize}

\subsubsection{Local Functions}

validateStream(deviceID), checkIntegrity(dataChunk)

\newpage

\section{MIS of Real-Time Streaming Module} \label{RealTimeStreamingModule}

\subsection{Module}

This module handles the continuous transmission of eye-tracking and video data to the dashboard for the live visualization. It ensures low-latency data flow and manages temporary buffering to keep the stream stable.

\subsection{Uses}

Data Ingestion Module, Data Preprocessing Module, Dashboard Visualization Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{3.2cm} p{4.2cm} p{4.2cm} p{2.5cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
initializeStream & configSettings & streamSession & ConnectionError \\
transmitData & processedData & status & StreamError \\
terminateStream & sessionID & status & None \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Real-Time Streaming Module}
\label{tab:realTimeStreamingAP}
\end{table}


\subsection{Semantics}

\subsubsection{State Variables}

activeStream: maintains the current streaming session status.

\subsubsection{Environment Variables}

Network socket for dashboard communication and connected video devices.

\subsubsection{Assumptions}

Stable network connection and active dashboard session are available.

\subsubsection{Access Routine Semantics}

\noindent initializeStream():
\begin{itemize}
\item transition: Opens a new connection to the dashboard and starts transmitting.
\item output: Returns a session object.
\item exception: Raises ConnectionError if the network fails.
\end{itemize}

\noindent transmitData():
\begin{itemize}
\item transition: Sends processed gaze and video frames in real time.
\item output: Returns success confirmation.
\item exception: Raises StreamError if data loss occurs.
\end{itemize}

\noindent terminateStream():
\begin{itemize}
\item transition: Ends the streaming session and clears buffers.
\item output: Returns final session status.
\item exception: None.
\end{itemize}

\subsubsection{Local Functions}

bufferData(), reconnectStream()

\newpage

\section{MIS of Data Preprocessing Module} \label{DataPreprocessingModule}

\subsection{Module}

This module prepares the captured data for analysis by filtering noise, normalizing the coordinates, and structuring the gaze and video data into useable formats. It also cleans questionnaire responses by removing empty, duplicate, or invalid entries before analysis.

\subsection{Uses}

Data Ingestion Module, Real-Time Streaming Module, Privacy \& Infrastructure Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{3.8cm} p{4.2cm} p{4.2cm} p{2.5cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
filterNoise & rawData & cleanData & DataError \\
normalizeCoordinates & cleanData & normalizedData & MathError \\
formatForAnalysis & normalizedData & structuredData & FormatError \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Data Preprocessing Module}
\label{tab:dataPreprocessingAP}
\end{table}


\subsection{Semantics}

\subsubsection{State Variables}

None. Operates statelessly on provided input data.

\subsubsection{Environment Variables}

None.

\subsubsection{Assumptions}

Input data follows the expected format and has valid timestamps.

\subsubsection{Access Routine Semantics}

\noindent filterNoise():
\begin{itemize}
\item transition: Applies smoothing or low-pass filters to reduce jitter.
\item output: Returns cleaned gaze and video data.
\item exception: Raises DataError for corrupted or incomplete data.
\end{itemize}

\noindent normalizeCoordinates():
\begin{itemize}
\item transition: Converts device-specific gaze coordinates to a shared reference frame.
\item output: Returns normalized gaze data.
\item exception: Raises MathError if coordinate mapping fails.
\end{itemize}

\noindent formatForAnalysis():
\begin{itemize}
\item transition: Structures data into a consistent schema for downstream analytics.
\item output: Returns data in the standardized format.
\item exception: Raises FormatError for invalid schema generation.
\end{itemize}

\noindent cleanQuestionnaireResponses():
\begin{itemize}
\item transition: Removes empty responses, malformed entries, and invalid questionnaire submissions.
\item output: Returns cleaned questionnaire data ready for engagement analytics.
\item exception: Raises DataError if response data cannot be validated.
\end{itemize}

\subsubsection{Local Functions}

interpolateMissingFrames(), alignStreams(), cleanQuestionnaireResponses()

\newpage

\section{MIS of Privacy and Infrastructure Module} \label{PrivacyInfrastructureModule}

\subsection{Module}

This module ensures secure data handling and stability of the system. It manages anonymization, encryption, and access control. It also handles maintaining infrastructure-level configurations and compliance with privacy policies. This includes securing instructor audio recordings and questionnaire response data through encryption and anonymization.

\subsection{Uses}

Data Ingestion Module, Data Preprocessing Module, Real-Time Streaming Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{3.8cm} p{4.2cm} p{4.2cm} p{2.5cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
encryptData & plainData & encryptedData & EncryptionError \\
anonymizeParticipant & userData & anonymizedData & PrivacyError \\
validateAccess & userRole, resource & permissionStatus & AuthError \\
monitorInfrastructure & metrics & systemReport & None \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Privacy and Infrastructure Module}
\label{tab:privacyInfrastructureAP}
\end{table}


\subsection{Semantics}

\subsubsection{State Variables}

accessLog: records of authenticated access attempts and actions performed.

\subsubsection{Environment Variables}

System environment variables for encryption keys, network configurations, and role-based access rules.

\subsubsection{Assumptions}

All data passing through this module adheres to encryption and anonymization standards under PIPEDA.

Audio data and questionnaire responses must also follow the system's encryption and anonymization requirements.

\subsubsection{Access Routine Semantics}

\noindent encryptData():
\begin{itemize}
\item transition: Applies encryption to sensitive data before storage or transmission.
\item output: Returns encrypted data.
\item exception: Raises EncryptionError if encryption fails.
\end{itemize}

\noindent anonymizeParticipant():
\begin{itemize}
\item transition: Removes personally identifiable information from datasets.
\item output: Returns anonymized data.
\item exception: Raises PrivacyError if anonymization is incomplete.
\end{itemize}

\noindent validateAccess():
\begin{itemize}
\item transition: Checks user permissions based on their assigned role.
\item output: Returns access approval or denial.
\item exception: Raises AuthError for invalid credentials.
\end{itemize}

\noindent monitorInfrastructure():
\begin{itemize}
\item transition: Tracks system metrics and logs anomalies for administrative review.
\item output: Returns current system status.
\item exception: None.
\end{itemize}

\subsubsection{Local Functions}

generateKey(), rotateLogs(), alertAdmin()

\newpage

\section{MIS of Engagement Analytics Module} \label{EngagementAnalyticsModule}

\subsection{Module}

This module analyzes student engagement by combining attention metrics with pre- and post-lecture questionnaire results. Questionnaire data is collected through the Data Ingestion Module, anonymized by the Privacy \& Infrastructure Module and preprocessed before reaching this module. Each question is associated with the content of a specific slide, helping compute slide-level learning scores. With pre- and post-lecture questionnaires, changes in student understanding can be identified and correlated with gaze-data. These analytics quantify the effectiveness of each slide, object type, instructor-directed attention, and instructor audio trends.

\subsection{Uses}

Data Preprocessing Module, Privacy \& Infrastructure Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None.

\subsubsection{Exported Access Programs}

\begin{table}[h!]
\centering
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{p{3.2cm} p{4.2cm} p{4.2cm} p{2.5cm}}
\toprule
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\midrule
computeLearningScores & anonymizedQuestionnaireData, slideMap & learningScores & DataError \\
\bottomrule
\end{tabular}
\caption{Exported Access Programs for Engagement Analytics Module}
\label{tab:engagementAnalyticsAP}
\end{table}

\subsection{Semantics}

\subsubsection{State Variables}

None.

\subsubsection{Environment Variables}

None.

\subsubsection{Assumptions}

Questionnaire data has already been collected, anonymized, and validated.  
Each questionnaire item includes a slide reference.

\subsubsection{Access Routine Semantics}

\noindent computeLearningScores():
\begin{itemize}
\item transition: Computes pre/post learning gains per slide using questionnaire data linked to slide identifiers. Aggregates multiple questions associated with the same slide.
\item output: Returns learning scores per slide and overall session learning outcome scores.
\item exception: Raises DataError for missing, malformed, or improperly mapped questionnaire items.
\end{itemize}

\subsubsection{Local Functions}

computeLearningDelta(), aggregateSlideScores()

\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage{}

\section*{Appendix --- Reflection}

The information in this section will be used to evaluate the team members on the
graduate attribute of Problem Analysis and Design.

\input{../../Reflection.tex}

\begin{enumerate}
  \item What went well while writing this deliverable? 

\textbf{Stanley:} 

\textbf{Manan:} The team was able to work well together and we were able to split the work effectively.

\textbf{Angela:} 

\textbf{Ann:} 

\textbf{Ibrahim:} 
  \item What pain points did you experience during this deliverable, and how
    did you resolve them?

\textbf{Stanley:} 

\textbf{Manan:} The main pain point we experienced was coordinating with our supervisors and coming up with a list of modules we though worked well with out system.

\textbf{Angela:} 

\textbf{Ann:} 

\textbf{Ibrahim:} 
  \item Which of your design decisions stemmed from speaking to your client(s)
  or a proxy (e.g. your peers, stakeholders, potential users)? For those that
  were not, why, and where did they come from?

\textbf{Stanley:} 

\textbf{Manan:} Decisions regarding the modules were made after speaking with our TA and supervisor to ensure that we were on the right track. We were suggested to add more modules to better break down the system and also focus on the processing aspect of the system.

\textbf{Angela:} 

\textbf{Ann:} 

\textbf{Ibrahim:} 
  \item While creating the design doc, what parts of your other documents (e.g.
  requirements, hazard analysis, etc), it any, needed to be changed, and why?

\textbf{Stanley:} 

\textbf{Manan:} Nothing significantly changed for over previous documents as we had a solid foundation from our SRS and other documents.

\textbf{Angela:} 

\textbf{Ann:} 

\textbf{Ibrahim:} 
  \item What are the limitations of your solution?  Put another way, given
  unlimited resources, what could you do to make the project better? (LO\_ProbSolutions)

\textbf{Stanley:} 

\textbf{Manan:} We are limited by the availability of eye-tracking devices and the accuracy of those devices. Being able to have these devices on hand at all times would make it easier to plan a system that works well with the hardware.

\textbf{Angela:} 

\textbf{Ann:} 

\textbf{Ibrahim:} 
  \item Give a brief overview of other design solutions you considered.  What
  are the benefits and tradeoffs of those other designs compared with the chosen
  design?  From all the potential options, why did you select the documented design?
  (LO\_Explores)

\textbf{Stanley:} 

\textbf{Manan:} We considered breaking down the modules further but we felt that the current breakdown was sufficient to cover all aspects of the system without overcomplicating it. The tradeoff with having too many modules is that it can make the system harder to manage and understand.

\textbf{Angela:} 

\textbf{Ann:} 

\textbf{Ibrahim:} 
\end{enumerate}


\end{document}
